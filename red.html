
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>
      
        Slinky - 
      
      Research by Courtney Robinson
    </title>
    <meta name="description" content="">
    <meta name="author" content="Courtney Robinson">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- HTML5 shim, for IE6-8 support of HTML elements -->
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->


    <link href="/assets/themes/hooligan/bootstrap/css/bootstrap.min.css" rel="stylesheet">
    <link href="/assets/themes/hooligan/bootstrap/css/bootstrap-responsive.min.css" rel="stylesheet">    
    <link rel="stylesheet" type="text/css" href="/assets/themes/hooligan/css-social-buttons/css/zocial.stripped.css">
    <link href="/assets/themes/hooligan/css/pygments.css" rel="stylesheet" type="text/css" media="all">
    <link href="/assets/themes/hooligan/css/darkstrap.css" rel="stylesheet" type="text/css" media="all">    
    <link href="/assets/themes/hooligan/css/style.css?body=1" rel="stylesheet" type="text/css" media="all">

    <link rel="alternate" type="application/rss+xml" title="" href="/rss.xml">
    <link rel="alternate" type="application/atom+xml" title="" href="/atom.xml">
    <!-- fav and touch icons -->
  <!-- Update these with your own images
    <link rel="shortcut icon" href="images/favicon.ico">
    <link rel="apple-touch-icon" href="images/apple-touch-icon.png">
    <link rel="apple-touch-icon" sizes="72x72" href="images/apple-touch-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="114x114" href="images/apple-touch-icon-114x114.png">
  -->
  </head>

  <body>
    <div class="navbar">
      <div class="navbar-inner">
        <div class="container">
          <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
          <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>      


          <a class="brand" href="/">Research by Courtney Robinson</a>
          <a class="brand" href="http://github.com/zcourts/Tesseract" title="Development currently happens in a private repo but will be made public under a BSD license soon.">Github Project (Tesseract)</a>

          <div class="nav-collapse">
            <ul class="nav">
              
              
              


  
    
      
    
  
    
      
      	
      	<li><a href="/archive.html">Archive</a></li>
      	
      
    
  
    
      
    
  
    
      
    
  
    
      
      	
      	<li><a href="/categories.html">Categories</a></li>
      	
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
      	
      	<li><a href="/pages.html">Pages</a></li>
      	
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
      	
      	<li><a href="/tags.html">Tags</a></li>
      	
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  



            </ul>
            <ul class="nav pull-right social visible-desktop">
              <li class="divider-vertical"></li>
              
                <li>
                  <a href="https://github.com/zcourts" class="zocial github icon" target="_blank">
                    <span class="hidden-desktop">Github</span>
                  </a>
                </li>
              
              
                <li>
                  <a href="https://plus.google.com/117586181712312669408" class="zocial googleplus icon" target="_blank">
                    <span class="hidden-desktop">Google+</span>
                  </a>
                </li>
                  
              
                <li>
                  <a href="https://twitter.com/zcourts" class="zocial twitter icon" target="_blank">
                  <span class="hidden-desktop">Twitter</span>
                  </a>
                </li>
                                        
              
                <li>
                  <a href="http://www.facebook.com/zcourts" class="zocial facebook icon" target="_blank">
                    <span class="hidden-desktop">Facebook</span>
                  </a>
                </li>
                         
              
                <li>
                  <a href="http://www.linkedin.com/in/zcourts" class="zocial linkedin icon" target="_blank">
                    <span class="hidden-desktop">LinkedIn</span>
                  </a>
                </li>
                                  
              
                <li>
                  <a href="http://feeds.feedburner.com/zcourts-research" class="zocial rss icon" target="_blank">
                    <span class="hidden-desktop">FeedBurner</span>
                  </a>
                </li>
              
            </ul>
          </div>
        </div>
      </div>
    </div>

    <div class="container">
      <div class="content">
        
<div class="page-header-wrapper">
	<div class="page-header">
  		<h1>Slinky </h1>
  	</div>
</div>

<div class="row">
  <div class="span12">
    <h1>Replicated Edge Distribution, RED</h1>

<p>One of the big problems with distributed traversals is fetching all vertices involved in the query while minimizing the number of network hops. It follows that an ideal graph would have all the vertices required for a query on the same node. </p>

<p>It is extremely difficult for an algorithm to always figure out the best way to partition a graph across multiple nodes, that would yield an ideal distribution for any query. Even if the user provided some kind of meta-data, a change in access pattern at the application level is likely to render the meta-data redundant or incorrect to the extent where the old distribution creates a bottle neck or causes too many network hops leading to network saturation or other failures.</p>

<p>On the premise that minimizing or removing network hops is an absolutely requirement which, if achieved will provide a huge improvement to query performance; It would be ideal if the entirety of any query could be performed on a single node. </p>

<p>The problem with bringing all data on a cluster on to a single node is it defeats the purpose of having a cluster in the first place. However, observe that in order to perform a query only the edges are required.</p>

<p>Every edge that&#39;s created is sent to each replica node in the cluster.
The SVC stores the edge information (from and to vertices).</p>

<p>OR</p>

<p>Using consistent hashing a vertex goes to it&#39;s node and replicas
When an edge is added the edge is stored on both nodes the edge points to.
Starting a query from any node, consistent hashing determines which node becomes leader the same way the decision would be made of where to place the vertex.
When a query is run the leader will have a copy of all the edges needed to complete the query, without making any network requests.</p>

<p>For e.g. in a 3 node cluster with labels A,B,C, the following are created.
Vertices 1...10 
Edges (1,2),(2,3),(2,4),(1,4),(3,8),(4,8),(5,8),(4,6),(4,7),(2,6),(2,8),(1,9),(7,10) </p>

<p>Assume vertex id ~= hash</p>

<p>Assume the data is distributed across the three nodes with consistent hashing such that the following distribution is achieved.</p>

<p>A   B   C
1   2   3
4   5   6
7   8   9
10  11  12</p>

<p>data Vertex = Vertex { name::String, id:Int }
data Edge = { from::Vertex, to::Vertex, directed::Bool }</p>

<p>add :: Vertex -&gt; None
add :: Edge -&gt; None</p>

<p>The following is a dry run of what would be added to each node A,B,C</p>

<h1>Edge    Send to     Edges on A              Edges on B          Edges on C</h1>

<p>1,2     A,B         1,2                     1,2
2,3     B,C                                 2,3                 2,3<br>
2,4     A,B         2,4                     2,4
1,4     A           1,4
3,8     B,C                                 3,8                 3,8
4,8     A,B         4,8                     4,8
5,8     B                                   5,8
4,6     A,C         4,6                                         4,6
4,7     A           4,7
2,6     B,C                                 2,6                 2,6
2,8     B,C                                 2,8                 2,8
1,9     A,C         1,9                                         1,9</p>

<h1>7,10    A           7,10</h1>

<p>Total               8                       8                   6</p>

<p>The following are example queries:</p>

<p>Depth first search assuming a directed graph where no loops are allowed.</p>

<p>Starting from 4, which belongs to node A.
4-&gt;8-&gt;6-&gt;7-&gt;10</p>

<p>Starting from 1, which belongs to node A
1-&gt;2-&gt;4-&gt;8-&gt;6-&gt;7-&gt;10 <strong>[FAIL]</strong> 2-&gt;3 but is not available on A.</p>

  </div>
</div>


      </div>

      <footer>
        <p>&copy; 2013 Courtney Robinson</a> <a href="/terminology.html"> Terminology used</a>
        </p>
      </footer>
    </div> <!-- /container -->

    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
    <script>window.jQuery || document.write('<script src="/assets/themes/hooligan/js/jquery.min.js"><\/script>')</script>
    <script src="/assets/themes/hooligan/bootstrap/js/bootstrap.min.js"></script>

    
  </body>
</html>

